<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Visualizador de PDF</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
    }
    #pdfViewer {
        width: 100%;
        height: 100vh;
        overflow-y: scroll;
    }
    #loadButton {
        margin-bottom: 10px;
    }
</style>
</head>
<body>
<input type="file" id="fileInput" accept=".pdf" style="display: none;">
<button id="loadButton">Carregar PDF</button>
<button id="extractButton">Extrair Texto</button>
<div id="pdfViewer"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.12.313/pdf.min.js"></script>
<script>
document.getElementById('loadButton').addEventListener('click', function() {
    document.getElementById('fileInput').click();
});

document.getElementById('fileInput').addEventListener('change', function(event) {
    var file = event.target.files[0];
    var reader = new FileReader();

    reader.onload = function(event) {
        var pdfData = new Uint8Array(event.target.result);
        pdfjsLib.getDocument({ data: pdfData }).promise.then(function(pdf) {
            var pdfViewer = document.getElementById('pdfViewer');
            pdfViewer.innerHTML = ''; // Limpa o conteúdo anterior
            for (let pageNum = 1; pageNum <= pdf.numPages; pageNum++) {
                pdf.getPage(pageNum).then(function(page) {
                    page.getTextContent().then(function(textContent) {
                        var pageText = textContent.items.map(function(item) {
                            return item.str;
                        }).join(' ');
                        var textElement = document.createElement('p');
                        textElement.textContent = 'Página ' + pageNum + ': ' + pageText;
                        pdfViewer.appendChild(textElement);
                    });
                });
            }
        });
    };

    reader.readAsArrayBuffer(file);
});

document.getElementById('extractButton').addEventListener('click', function() {
    var pdfViewer = document.getElementById('pdfViewer');
    var text = Array.from(pdfViewer.querySelectorAll('p')).map(p => p.textContent).join('\n');
    alert(text);
});

</script>
</body>
</html>
